import{j as e,r as h,S as w}from"./app-D7reNEmx.js";import{C as N,h as f,i as b,a as y,B as v,g as _,j as F,b as D,M as I,P as R,S as T,c as q,d as z,e as B,f as u}from"./select-CBKn4aly.js";import{a as L,B as c}from"./button-D1hRW6x4.js";import{C as P}from"./checkbox-DbGNUAdf.js";import{L as r,I as o}from"./label-m_3wVVO6.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],M=L("User",H),V=({className:l,label:x,...d})=>e.jsxs("div",{className:"textarea-container",children:[x&&e.jsx("label",{className:"textarea-label",children:x}),e.jsx("textarea",{className:`w-full min-h-[100px] p-2 border rounded-lg resize-y ${l}`,...d})]}),E=F,A=[{time:"08:00",available:!0},{time:"09:00",available:!0},{time:"10:00",available:!1},{time:"11:00",available:!0},{time:"14:00",available:!0},{time:"15:00",available:!0},{time:"16:00",available:!0},{time:"17:00",available:!1},{time:"18:00",available:!0}],O=[{id:"standard",name:"Repassage standard",price:"2€/pièce"},{id:"delicat",name:"Repassage délicat",price:"4€/pièce"},{id:"linge-maison",name:"Linge de maison",price:"3€/pièce"},{id:"express",name:"Service express (+50%)",price:"Supplément"}];function U(){const[l,x]=h.useState(),[d,g]=h.useState(),[n,m]=h.useState("date"),[a,i]=h.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",services:[],estimatedItems:"",notes:""}),C=(s,t)=>{i(j=>({...j,services:t?[...j.services,s]:j.services.filter(k=>k!==s)}))},S=s=>{s.preventDefault(),w.post("/bookings",{first_name:a.firstName,last_name:a.lastName,email:a.email,phone:a.phone,address:a.address,city:a.city,postal_code:a.postalCode,services:a.services,estimated_items:a.estimatedItems,notes:a.notes,booking_date:l==null?void 0:l.toISOString().split("T")[0],booking_time:d},{onSuccess:()=>m("confirmation"),onError:t=>{console.error("Validation errors",t)}})},p=s=>s.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return n==="confirmation"?e.jsxs(N,{className:"mx-auto w-full max-w-2xl",children:[e.jsx(f,{className:"text-center",children:e.jsx(b,{className:"text-2xl text-green-600",children:"Réservation confirmée !"})}),e.jsxs(y,{className:"space-y-6 text-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-lg",children:["Merci ",a.firstName," pour votre réservation"]}),e.jsxs("div",{className:"space-y-2 rounded-lg bg-slate-50 p-4 text-slate-800",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date :"})," ",l&&p(l)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Heure :"})," ",d]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Adresse :"})," ",a.address,", ",a.city]})]})]}),e.jsxs("p",{className:"text-slate-600",children:["Vous recevrez un email de confirmation à ",a.email," avec tous les détails. Notre équipe vous contactera 24h avant le rendez-vous."]}),e.jsx(c,{onClick:()=>{m("date"),x(void 0),g(void 0),i({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",services:[],estimatedItems:"",notes:""})},className:"bg-slate-800 text-slate-100 hover:bg-slate-500",children:"Nouvelle réservation"})]})]}):e.jsxs(N,{className:"mx-auto w-full max-w-4xl",children:[e.jsxs(f,{children:[e.jsx(b,{className:"text-center text-2xl",children:"Réserver votre service de repassage"}),e.jsxs("div",{className:"mt-4 flex justify-center space-x-4",children:[e.jsx(v,{variant:n==="date"?"default":"outline",className:"px-3 py-1",children:"1. Date"}),e.jsx(v,{variant:n==="time"?"default":"outline",className:"px-3 py-1",children:"2. Heure"}),e.jsx(v,{variant:n==="details"?"default":"outline",className:"px-3 py-1",children:"3. Détails"})]})]}),e.jsxs(y,{children:[n==="date"&&e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Choisissez une date"}),e.jsx(_,{mode:"single",selected:l,onSelect:x,disabled:s=>s<new Date||s.getDay()===0,locale:E,className:"rdp mx-auto rounded-md border [&_.rdp-weekday]:border [&_.rdp-weekday]:bg-slate-800 [&_.rdp-weekday]:text-center [&_.rdp-weekday]:font-normal"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"* Service disponible du lundi au samedi"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(c,{onClick:()=>m("time"),disabled:!l,className:"bg-slate-800 font-bold tracking-wider text-slate-100 hover:bg-slate-700",children:"Continuer"})})]}),n==="time"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Choisissez un créneau"}),e.jsx("p",{className:"mb-6 text-slate-600",children:l&&p(l)}),e.jsx("div",{className:"mx-auto grid max-w-2xl grid-cols-2 gap-3 md:grid-cols-4",children:A.map(s=>e.jsxs(c,{variant:d===s.time?"default":"outline",disabled:!s.available,onClick:()=>g(s.time),className:"h-12",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),s.time]},s.time))}),e.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Les créneaux grisés ne sont pas disponibles"})]}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(c,{variant:"outline",onClick:()=>m("date"),children:"Retour"}),e.jsx(c,{onClick:()=>m("details"),disabled:!d,className:"bg-slate-800 font-bold tracking-wider text-slate-100 hover:bg-slate-700",children:"Continuer"})]})]}),n==="details"&&e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg bg-slate-50 p-4 text-slate-950",children:[e.jsx("h3",{className:"mb-2 font-semibold",children:"Récapitulatif"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date :"})," ",l&&p(l)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Heure :"})," ",d]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center text-lg font-semibold",children:[e.jsx(M,{className:"mr-2 h-5 w-5"}),"Informations personnelles"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"firstName",children:"Prénom *"}),e.jsx(o,{id:"firstName",value:a.firstName,onChange:s=>i(t=>({...t,firstName:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"lastName",children:"Nom *"}),e.jsx(o,{id:"lastName",value:a.lastName,onChange:s=>i(t=>({...t,lastName:s.target.value})),required:!0})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"email",children:"Email *"}),e.jsx(o,{id:"email",type:"email",value:a.email,onChange:s=>i(t=>({...t,email:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"phone",children:"Téléphone *"}),e.jsx(o,{id:"phone",type:"tel",value:a.phone,onChange:s=>i(t=>({...t,phone:s.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center text-lg font-semibold",children:[e.jsx(I,{className:"mr-2 h-5 w-5"}),"Adresse de service"]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"address",children:"Adresse *"}),e.jsx(o,{id:"address",value:a.address,onChange:s=>i(t=>({...t,address:s.target.value})),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"city",children:"Ville *"}),e.jsx(o,{id:"city",value:a.city,onChange:s=>i(t=>({...t,city:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"postalCode",children:"Code postal *"}),e.jsx(o,{id:"postalCode",value:a.postalCode,onChange:s=>i(t=>({...t,postalCode:s.target.value})),required:!0})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center text-lg font-semibold",children:[e.jsx(R,{className:"mr-2 h-5 w-5"}),"Services demandés"]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:O.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 rounded-lg border p-3",children:[e.jsx(P,{id:s.id,checked:a.services.includes(s.id),onCheckedChange:t=>C(s.id,t)}),e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{htmlFor:s.id,className:"cursor-pointer font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-slate-600",children:s.price})]})]},s.id))})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsxs("div",{children:[e.jsx(r,{htmlFor:"estimatedItems",children:"Nombre estimé de pièces"}),e.jsxs(T,{onValueChange:s=>i(t=>({...t,estimatedItems:s})),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Sélectionnez"})}),e.jsxs(B,{children:[e.jsx(u,{value:"1-10",children:"1-10 pièces"}),e.jsx(u,{value:"11-20",children:"11-20 pièces"}),e.jsx(u,{value:"21-30",children:"21-30 pièces"}),e.jsx(u,{value:"30+",children:"Plus de 30 pièces"})]})]})]})}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"notes",children:"Notes supplémentaires"}),e.jsx(V,{id:"notes",placeholder:"Instructions spéciales, accès à votre domicile, etc.",value:a.notes,onChange:s=>i(t=>({...t,notes:s.target.value}))})]}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(c,{variant:"outline",onClick:()=>m("time"),children:"Retour"}),e.jsx(c,{type:"submit",disabled:!a.firstName||!a.lastName||!a.email||!a.phone||!a.address||!a.city||a.services.length===0,className:"bg-slate-800 text-slate-100 hover:bg-slate-500",children:"Confirmer la réservation"})]})]})})]})]})}const W=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));export{U as B,V as T,W as a};
